{% extends 'dasboard/base.html' %}
{% load get_model_object %}
{% load condicionales %}
{% block titulo %}
<title>Sensei | Tareas</title>
{% endblock titulo %}

{% block navegacion_links %}

<nav aria-label="breadcrumb" role="navigation">
    <ol class="breadcrumb adminx-page-breadcrumb">
        <li class="breadcrumb-item"><a href="{% url 'ctr:dasboard' %}">Dashboard</a></li>
        <li class="breadcrumb-item"><a href="{% url 'ctr:al_materia' %}">Materias</a></li>
        <li class="breadcrumb-item active" aria-current="page">Tareas</li>
    </ol>
</nav>
<div class="pb-3">
    <h2>{{unidad.unidad_materia}}</h2>
    <h3>{{unidad}}</h3>
</div>
{% endblock navegacion_links %}


{% block contenido %}
<div class="col-md-6 col-lg-4 d-flex">
  <div class="card border-0 bg-success text-white text-center mb-grid w-100">
    <div class="d-flex flex-row align-items-center h-100">
      <div class="card-icon d-flex align-items-center h-100 justify-content-center">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-check-square"><polyline points="9 11 12 14 23 3"></polyline><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path></svg>
      </div>
      <div class="card-body">
        <div class="card-info-title">Promedio Unidad</div>
        <h3 class="card-title mb-0">
         {{promedio.calificacion_unidad}}
        </h3>
      </div>
    </div>
  </div>
</div>
</div>

<div class="row">
  <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12">
  <div class="card">
    <div class="card-header">
      Tareas
    </div>
    <div class="card-body">
      <table class="table table-striped table-sm table-responsive">
        <thead>
          <tr>
            <th scope="col">Nombre</th>
            <th scope="col">Descripcion</th>
            <th scope="col">Inicio</th>
            <th scope="col">Termino</th>
            <th scope="col">Tipo</th>
            <th scope="col">%</th>
            <th scope="col">Accion</th>
          </tr>
        </thead>
        <tbody>
          {% for item in object_list %}
          <tr>
            <td>{{item.tarea_nombre}}</td>
            <td>{{item.tarea_descripcion}}</td>
            <td>{{item.tarea_fecha_inicio}}</td>
            <td>{{item.tarea_fecha_termino}}</td>
            <td>{{item.tarea_tipo}}</td>
            <td>{{item.tarea_porcentaje}}%</td>
            <td>
              {% if item.tarea_id|is_aviable_tarea %}
               {{item.tarea_id|return_button_tarea|safe}}
               {% else %}
               <span class="badge badge-warning">Fuera del rango</span>
              {% endif %}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
  </div>



  <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12">
  <div class="card">
    <div class="card-header">
      Entregadas
    </div>
    <div class="card-body">
      <table class="table table-striped table-sm table-responsive">
        <thead>
          <tr>
            <th scope="col">Tarea</th>
            <th scope="col">Doc</th>
            <th scope="col">Respuesta</th>
            <th scope="col">Entregado</th>
            <th scope="col">Status</th>
            <th scope="col">Calificacion</th>
            <th scope="col">Real %</th>
            <th scope="col">Acci√≥n</th>
          </tr>
        </thead>
        <tbody>
          {% for item in entregas %}
          <tr>
            <td>{{item.tareaDocumento_Tarea}}</td>
            <td>
              
              {% if item.tareaDocumento_Tarea.tarea_tipo == 'ENTREGA' %}
              <a href="{{item.tareaDocumento_archivo.url}}" class="btn btn-sm btn-icon btn-secondary">
                <span class="oi oi-file"></span>
              </a>
              {% endif %}
                
            </td>
            <td>{{item.tareaDocumento_comentario_maestro}}</td>
            <td>{{item.tareaDocumento_creado}}</td>
            <td>
              
              {% if item.tareaDocumento_status %}
              <span class="badge badge-success">Calificado</span>
              {% else %}
              <span class="badge badge-info">Entregado</span>
              {% endif %}
                
            </td>
            <td>{{item.tareaDocumento_calificacion}}</td>
            <td>{{item.suma_real_porcentaje}}</td>
            <td>
              {% if item.tareaDocumento_Tarea.tarea_tipo == 'ENTREGA' %}
              {% if item.tareaDocumento_status == False %}
              <a href="{% url 'ctr:al_tareas_delete' item.tareaDocumento_id item.tareaDocumento_Tarea.tarea_unidad.unidad_id %}" class="btn btn-sm btn-labeled btn-danger">
                <span class="btn-label">
                  <span class="oi oi-trash" aria-hidden="true"></span>
                </span>
                <span class="btn-text">
                  Eliminar
                </span>
              </a>
              {% endif %}
              {% endif %}
                
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
  </div>
</div>
{% endblock contenido %}